<!-- Skip links pour la navigation clavier -->
<a href="#main-content" class="skip-link">Aller au contenu principal</a>

<app-navbar></app-navbar>

<div class="w-full px-4 md:px-8 lg:px-24 xl:px-48 2xl:px-64 py-8">
  <div class="flex gap-6 justify-center max-w-[1500px] mx-auto">
    <div class="max-w-4xl flex-1">
      <main id="main-content" tabindex="-1">
        <router-outlet></router-outlet>
      </main>
    </div>
    <!-- Sidebar visible seulement quand historique OU filtres sont affichés -->
    @if (hasHistory() || isOnHomePage()) {
    <div class="w-90 hidden xl:block flex-shrink-0 sticky top-20 h-fit">
      <!-- Historique (affiché seulement s'il y a des éléments) -->
      @if (hasHistory()) {
      <app-history></app-history>
      }

      <!-- Filters components visibles uniquement sur la page d'accueil -->
      @if (isOnHomePage()) {
      <!-- Filtres par segments et genres -->
      <app-filters
        [segments]="segments()"
        [selectedSegments]="selectedSegments()"
        [selectedGenres]="selectedGenres()"
        [totalCount]="totalCount()"
        [loading]="loading()"
        (segmentsSelected)="onSegmentsSelected($event)"
        (genresSelected)="onGenresSelected($event)"
      >
      </app-filters>
      }
    </div>
    }
  </div>
</div>
